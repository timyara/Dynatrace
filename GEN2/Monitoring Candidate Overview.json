{"version":11,"variables":[{"key":"hostCandidate","type":"query","input":"fetch dt.entity.host, from: -30d, to: now()\n| fieldsAdd entity.name, id, isMonitoringCandidate, softwareTechnologies, vmware.DC=belongs_to[dt.entity.vmware_datacenter], vmware_ID=runs_on[dt.entity.virtualmachine]\n| filterOut isMonitoringCandidate==false\n| lookup [fetch dt.entity.virtualmachine\n          | fieldsAdd memoryTotal\n         ], sourceField:vmware_ID, lookupField:id\n| fieldsRename host_candidate=lookup.entity.name, host_candidate_memory=lookup.memoryTotal\n| fieldsAdd act_host_units = toDouble(toDouble((host_candidate_memory/(1024)))/16)\n| fieldsAdd rounded_host_units = if(act_host_units<=0.1,0.1,else: if(act_host_units<=0.25,0.25,else: if(act_host_units<=0.5,0.5,else: if(act_host_units<=1,1,else:ceil(act_host_units)))))\n| sort rounded_host_units desc\n| fields host_candidate\n| limit 5000","multiple":true}],"tiles":{"0":{"type":"data","title":"Top 10 Monitoring Candidates - HU","query":"fetch dt.entity.host, from: -30d, to: now()\n| fieldsAdd entity.name, id, isMonitoringCandidate, softwareTechnologies, vmware.DC=belongs_to[dt.entity.vmware_datacenter], vmware_ID=runs_on[dt.entity.virtualmachine]\n| filterOut isMonitoringCandidate==false\n| lookup [fetch dt.entity.virtualmachine\n          | fieldsAdd memoryTotal\n         ], sourceField:vmware_ID, lookupField:id\n| fieldsRename host_candidate=lookup.entity.name, host_candidate_memory=lookup.memoryTotal\n| fieldsAdd act_host_units = toDouble(toDouble((host_candidate_memory/(1024)))/16)\n| fieldsAdd rounded_host_units = if(act_host_units<=0.1,0.1,else: if(act_host_units<=0.25,0.25,else: if(act_host_units<=0.5,0.5,else: if(act_host_units<=1,1,else:ceil(act_host_units)))))\n//| fields host_candidate, rounded_host_units\n| filter in(entity.name, $hostCandidate)\n| summarize sum_hu=sum(rounded_host_units), by:{entity.name}\n| sort sum_hu desc\n| limit 10","visualization":"pieChart","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoricalBarChartSettings":{"categoryAxis":"entity.name","categoryAxisLabel":"entity.name","valueAxis":"sum_hu","valueAxisLabel":"sum_hu"}},"table":{"enableLineWrap":false}}},"1":{"type":"data","title":"Full List","query":"fetch dt.entity.host, from: -30d, to: now()\n| fieldsAdd entity.name, id, isMonitoringCandidate, softwareTechnologies, vmware.DC=belongs_to[dt.entity.vmware_datacenter], vmware_ID=runs_on[dt.entity.virtualmachine]\n| filterOut isMonitoringCandidate==false\n| lookup [fetch dt.entity.virtualmachine\n          | fieldsAdd memoryTotal\n         ], sourceField:vmware_ID, lookupField:id\n| fieldsRename host_candidate=lookup.entity.name, host_candidate_memory=lookup.memoryTotal\n| fieldsAdd act_host_units = toDouble(toDouble((host_candidate_memory/(1024)))/16)\n| fieldsAdd rounded_host_units = if(act_host_units<=0.1,0.1,else: if(act_host_units<=0.25,0.25,else: if(act_host_units<=0.5,0.5,else: if(act_host_units<=1,1,else:ceil(act_host_units)))))\n| filter in(entity.name, $hostCandidate)\n| sort rounded_host_units desc\n//| fields host_candidate, rounded_host_units\n//| summarize sum_hu=sum(rounded_host_units)","visualization":"table","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"}},"singleValue":{"showLabel":true,"label":"","autoscale":true},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"2":{"type":"data","title":"All Monitoring Candidates - HU","query":"fetch dt.entity.host, from: -30d, to: now()\n| fieldsAdd entity.name, id, isMonitoringCandidate, softwareTechnologies, vmware.DC=belongs_to[dt.entity.vmware_datacenter], vmware_ID=runs_on[dt.entity.virtualmachine]\n| filterOut isMonitoringCandidate==false\n| lookup [fetch dt.entity.virtualmachine\n          | fieldsAdd memoryTotal\n         ], sourceField:vmware_ID, lookupField:id\n| fieldsRename host_candidate=lookup.entity.name, host_candidate_memory=lookup.memoryTotal\n| fieldsAdd act_host_units = toDouble(toDouble((host_candidate_memory/(1024)))/16)\n| fieldsAdd rounded_host_units = if(act_host_units<=0.1,0.1,else: if(act_host_units<=0.25,0.25,else: if(act_host_units<=0.5,0.5,else: if(act_host_units<=1,1,else:ceil(act_host_units)))))\n//| fields host_candidate, rounded_host_units\n| filter in(entity.name, $hostCandidate)\n| summarize sum_hu=sum(rounded_host_units), by:{entity.name}\n| sort sum_hu desc","visualization":"table","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"}},"singleValue":{"showLabel":true,"label":"","autoscale":true},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"3":{"type":"data","title":"","query":"fetch dt.entity.host, from: -30d, to: now()\n| fieldsAdd entity.name, id, isMonitoringCandidate, softwareTechnologies, vmware.DC=belongs_to[dt.entity.vmware_datacenter], vmware_ID=runs_on[dt.entity.virtualmachine]\n| filterOut isMonitoringCandidate==false\n| lookup [fetch dt.entity.virtualmachine\n          | fieldsAdd memoryTotal\n         ], sourceField:vmware_ID, lookupField:id\n| fieldsRename host_candidate=lookup.entity.name, host_candidate_memory=lookup.memoryTotal\n| fieldsAdd act_host_units = toDouble(toDouble((host_candidate_memory/(1024)))/16)\n| fieldsAdd rounded_host_units = if(act_host_units<=0.1,0.1,else: if(act_host_units<=0.25,0.25,else: if(act_host_units<=0.5,0.5,else: if(act_host_units<=1,1,else:ceil(act_host_units)))))\n//| fields host_candidate, rounded_host_units\n//| filter in(entity.name, $hostCandidate)\n| summarize projected_host_units=sum(rounded_host_units)*0.4*0.9","visualization":"singleValue","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"}},"singleValue":{"showLabel":true,"label":"","autoscale":true},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}}},"layouts":{"0":{"x":0,"y":0,"w":16,"h":6},"1":{"x":0,"y":12,"w":16,"h":6},"2":{"x":0,"y":6,"w":7,"h":6},"3":{"x":7,"y":6,"w":4,"h":6}}}