{"version":11,"variables":[{"key":"responseCode","type":"query","input":"fetch logs\n| filter matchesValue(k8s.container.name, \"mainapi\")\n| parse `content`, \"DATA IPADDR:ip LD ']' SPACE PUNCT LD:requestType SPACE LD:url SPACE LD:version '\\\"' SPACE INT:responseCode SPACE\"\n| fields responseCode\n| sort responseCode, direction:\"ascending\"\n//| summarize distinctResponseCodes = collectDistinct(toString(responseCode))\n| summarize distinctResponseCodes = collectDistinct(responseCode)","multiple":true}],"tiles":{"1":{"type":"data","title":"","query":"fetch logs\n| filter matchesValue(k8s.container.name, \"mainapi\")\n| parse `content`, \"IPADDR:ip LD ']' SPACE PUNCT LD:requestType SPACE LD:url SPACE LD:version '\\\"' SPACE INT:responseCode\"\n| fieldsAdd status = if(responseCode <= 201, \"ðŸŸ¢\",else: \"ðŸ”´\")\n| filter in(responseCode, array($responseCode))\n| fields timestamp, status, ip, requestType, url, responseCode, content\n| limit 100","visualization":"table","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"}},"singleValue":{"showLabel":true,"label":"","autoscale":true},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{}}}},"2":{"type":"data","title":"Response Code History","query":"fetch logs\n| filter matchesValue(k8s.container.name, \"mainapi\")\n| parse `content`, \"DATA IPADDR:ip LD ']' SPACE PUNCT LD:requestType SPACE LD:url SPACE LD:version '\\\"' SPACE INT:responseCode SPACE\"\n| filter in(responseCode, array($responseCode))\n| makeTimeseries total = count(), by:{resonseCode = toString(responseCode)}","visualization":"barChart","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"seriesOverrides":[{"seriesId":["500"],"override":{"color":{"Default":"var(--dt-colors-charts-vulnerability-risk-level-critical-default, #970c0c)","Hover":"var(--dt-colors-charts-vulnerability-risk-level-critical-hover, #750b0b)","Active":"var(--dt-colors-charts-vulnerability-risk-level-critical-active, #4b0707)","DefaultTransparent":"var(--dt-colors-charts-vulnerability-risk-level-critical-default-transparent, #591300cc)","HoverTransparent":"var(--dt-colors-charts-vulnerability-risk-level-critical-hover-transparent, #000c)","ActiveTransparent":"var(--dt-colors-charts-vulnerability-risk-level-critical-active-transparent, #000c)"}}},{"seriesId":["200"],"override":{"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #0d9c29)","Hover":"var(--dt-colors-charts-categorical-color-09-hover, #0a7b20)","Active":"var(--dt-colors-charts-categorical-color-09-active, #075f19)","DefaultTransparent":"var(--dt-colors-charts-categorical-color-09-default-transparent, #008500cc)","HoverTransparent":"var(--dt-colors-charts-categorical-color-09-hover-transparent, #005905cc)","ActiveTransparent":"var(--dt-colors-charts-categorical-color-09-active-transparent, #003112cc)"}}}],"valueRepresentation":"absolute"},"singleValue":{"showLabel":true,"label":"","autoscale":true},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{}}}},"3":{"type":"data","title":"Response Code Breakdown","query":"fetch logs\n| filter matchesValue(k8s.container.name, \"mainapi\")\n| parse `content`, \"DATA IPADDR:ip LD ']' SPACE PUNCT LD:requestType SPACE LD:url SPACE LD:version '\\\"' SPACE INT:responseCode SPACE\"\n| filter in(responseCode, array($responseCode))\n| summarize  total = count(), by:{responseCode}","visualization":"table","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoricalBarChartSettings":{"categoryAxis":"responseCode","categoryAxisLabel":"responseCode","valueAxis":"total","valueAxisLabel":"total"}},"table":{"lineWrapIds":[["content"]],"enableLineWrap":true}}},"4":{"type":"data","title":"Top URLs","query":"fetch logs\n| filter matchesValue(k8s.container.name, \"mainapi\")\n| parse `content`, \"DATA IPADDR:ip LD ']' SPACE PUNCT LD:requestType SPACE LD:url SPACE LD:version '\\\"' SPACE INT:responseCode SPACE\"\n| filterOut isNull(responseCode)\n| summarize  total = count(), by:{url}\n| sort total, direction:\"descending\"\n| limit 10","visualization":"table","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoricalBarChartSettings":{"categoryAxis":"responseCode","categoryAxisLabel":"responseCode","valueAxis":"total","valueAxisLabel":"total"}},"singleValue":{"showLabel":true,"label":"","autoscale":true},"table":{"lineWrapIds":[["content"]],"enableLineWrap":true}}},"5":{"type":"data","title":"Urls with Errors","query":"fetch logs\n| filter matchesValue(k8s.container.name, \"mainapi\")\n| parse `content`, \"DATA IPADDR:ip LD ']' SPACE PUNCT LD:requestType SPACE LD:url SPACE LD:version '\\\"' SPACE INT:responseCode SPACE\"\n| filterOut isNull(responseCode)\n| summarize  total = count(), by:{url, responseCode}\n| filter responseCode > 201\n| sort total, direction:\"descending\"\n| limit 10","visualization":"table","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoricalBarChartSettings":{"categoryAxis":"responseCode","categoryAxisLabel":"responseCode","valueAxis":"total","valueAxisLabel":"total"}},"singleValue":{"showLabel":true,"label":"","autoscale":true},"table":{"lineWrapIds":[["content"]],"enableLineWrap":true}}},"6":{"type":"data","title":"Total Tranactions","query":"fetch logs\n| filter matchesValue(k8s.container.name, \"mainapi\")\n| parse `content`, \"DATA IPADDR:ip LD ']' SPACE PUNCT LD:requestType SPACE LD:url SPACE LD:version '\\\"' SPACE INT:responseCode SPACE\"\n| filterOut isNull(responseCode)\n| summarize  total = count()","visualization":"singleValue","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoricalBarChartSettings":{"categoryAxis":"responseCode","categoryAxisLabel":"responseCode","valueAxis":"total","valueAxisLabel":"total"}},"singleValue":{"showLabel":false,"label":"","autoscale":true},"table":{"lineWrapIds":[["content"]],"enableLineWrap":true}}},"7":{"type":"data","title":"Fraud Errors","query":"fetch logs\n| filter matchesValue(k8s.container.name, \"mainapi\") and matchesPhrase(content, \"Fraud\")\n//| parse `content`, \"DATA IPADDR:ip LD ']' SPACE PUNCT LD:requestType SPACE LD:url SPACE LD:version '\\\"' SPACE INT:responseCode SPACE\"\n| parse content, \"LD 'user ' LD:user ':' DATA:errorMessage ']'\"\n| fields timestamp, user, errorMessage\n| sort timestamp desc","visualization":"table","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"}},"singleValue":{"showLabel":true,"label":"","autoscale":true},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["errorMessage"]],"columnWidths":{}}}},"8":{"type":"data","title":"Fraud Errors","query":"fetch logs\n| filter matchesValue(k8s.container.name, \"mainapi\") and matchesPhrase(content, \"Fraud\")\n//| parse `content`, \"DATA IPADDR:ip LD ']' SPACE PUNCT LD:requestType SPACE LD:url SPACE LD:version '\\\"' SPACE INT:responseCode SPACE\"\n| parse content, \"LD 'user ' LD:user ':' DATA:errorMessage ']'\"\n| summarize fraudErrors = count()\n| fields Status = concat(fraudErrors, \" \", \"ðŸ”´\")","visualization":"singleValue","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"}},"singleValue":{"showLabel":false,"label":"","autoscale":false},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{}}}}},"layouts":{"1":{"x":0,"y":11,"w":24,"h":6},"2":{"x":8,"y":0,"w":16,"h":4},"3":{"x":4,"y":0,"w":4,"h":4},"4":{"x":0,"y":4,"w":7,"h":7},"5":{"x":7,"y":4,"w":5,"h":7},"6":{"x":0,"y":0,"w":2,"h":4},"7":{"x":12,"y":4,"w":12,"h":7},"8":{"x":2,"y":0,"w":2,"h":4}}}