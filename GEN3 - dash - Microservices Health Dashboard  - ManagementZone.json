{"version":15,"variables":[{"key":"ManagementZone","type":"query","visible":true,"input":"fetch dt.entity.service\n| filter isNotNull(managementZones)\n| fields managementZones\n| summarize managementZones = collectDistinct(managementZones)\n| expand managementZones\n| sort managementZones asc","multiple":false},{"key":"Service","type":"query","visible":true,"input":"fetch dt.entity.service\n| filter isNotNull(managementZones) \n| expand managementZones\n| filter in(managementZones, $ManagementZone)\n//| filter serviceType != \"DATABASE_SERVICE\"\n| fields service = entity.name\n| summarize service = collectDistinct(service)\n| expand service\n| sort service asc\n| fields workloads = arrayRemoveNulls(array(\"ALL\", service))","multiple":false,"defaultValue":"ALL"}],"tiles":{"0":{"type":"data","title":"","query":"timeseries {latency_p50 = median(dt.service.request.response_time),\n           latency_p90 = percentile(dt.service.request.response_time, 90),\n           latency_p99 = percentile(dt.service.request.response_time, 99),\n           requests = sum(dt.service.request.count), \n           errors = sum(dt.service.request.failure_count)},\n           by:{dt.entity.service},\n           filter: \n           {in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))}\n| filter in($Service, \"ALL\") or \n         in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\")))\n\n| join [ timeseries http_5xx = sum(dt.service.request.count,default: 0.0),\n           by:{dt.entity.service},\n           filter:{(http.response.status_code >= 500 and http.response.status_code <= 599) \n           and\n           (in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\"))))}\n| filter in($Service, \"ALL\") or \n         in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\")))\n           ],\n           kind: leftOuter,\n           prefix: \"http5xx.\",\n           on: {timeframe,left[dt.entity.service] == right[dt.entity.service]},\n           executionOrder: leftFirst\n\n| join [ timeseries http_4xx = sum(dt.service.request.count,default: 0.0),\n           by:{dt.entity.service},\n           filter:{(http.response.status_code >= 400 and http.response.status_code <= 499) \n           and\n           (in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\"))))}\n| filter in($Service, \"ALL\") or \n         in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\")))\n           ],\n           kind: leftOuter,\n           prefix: \"http4xx.\",\n           on: {timeframe,left[dt.entity.service] == right[dt.entity.service]},\n           executionOrder: leftFirst\n           \n| join [fetch dt.davis.problems, from:now()-7h, to:now()\n| sort timestamp desc\n| filter event.status == \"ACTIVE\" and not dt.davis.is_duplicate == \"true\"\n| filter matchesPhrase(affected_entity_ids, \"SERVICE-\")\n| expand affected_entity_ids\n| summarize {Problems = countDistinct(display_id),event.id = takeFirst(event.id)}, by:{affected_entity_ids}],\n    kind: leftOuter,\n    on: {left[dt.entity.service] == right[affected_entity_ids] },\n    fields: {Problems, affected_entity_ids,event.id}\n    \n| fieldsAdd Service = entityName(dt.entity.service)\n| fieldsAdd Latency_p50 = arrayAvg(latency_p50),\n            Latency_p90 = arrayAvg(latency_p90),\n            Latency_p99 = arrayAvg(latency_p99),\n            Requests = arraySum(requests), \n            Errors = arraySum(errors),\n            `5xx` = arraySum(http5xx.http_5xx),\n            `4xx` = arraySum(http4xx.http_4xx)\n            \n| fieldsAdd Availability = 100 - (Errors/Requests) *100\n| fieldsAdd FailureRate = (Errors/Requests) *100\n| fields Status = if(Problems >= 0 , \"ðŸ”´ Unhealthy\",  else: \"ðŸŸ¢ Healthy\"),\n         Service, \n         ServiceType = entityAttr(dt.entity.service, \"serviceType\"),\n         dt.entity.service,\n         StatusSort = if(Problems > 0, 0, else: 1),\n         FailureRate,\n         Errors,\n        `5xx` = if(isNull(`5xx`), 0, else:`5xx`),\n        `4xx` = if(isNull(`4xx`), 0, else:`4xx`),\n         Requests,\n         Latency_p50,\n         Latency_p90,\n         Latency_p99,\n         event.id\n| sort StatusSort asc\n| fieldsRemove StatusSort","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"Availability","title":"","isEnabled":true,"rules":[{"id":0,"color":"#0D9C29","comparator":"â‰¥","label":"","value":98},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":"#AE132D","comparator":"<","label":"","value":98}]},{"id":2,"field":"Errors","title":"","isEnabled":true,"rules":[{"id":0,"color":"#0D9C29","comparator":"=","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":"#AE132D","comparator":"â‰¥","label":"","value":0}]},{"id":3,"field":"5xx","title":"","isEnabled":true,"rules":[{"id":0,"color":"#0D9C29","comparator":"=","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":"#AE132D","comparator":"â‰¥","label":"","value":0}]},{"id":4,"field":"4xx","title":"","isEnabled":true,"rules":[{"id":0,"color":"#0D9C29","comparator":"=","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":"","value":0},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"â‰¥","label":""}]},{"id":6,"field":"FailureRate","title":"","isEnabled":true,"rules":[{"id":0,"color":"#0D9C29","comparator":"â‰¥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":"#AE132D","comparator":"â‰¥","label":"","value":2}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"Status","valueAxisLabel":"FailureRate","categoryAxis":"Status","valueAxis":"FailureRate"},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[["SlowRequests"],["Availability"],["dt.entity.service"],["ServiceType"],["event.id"]],"lineWrapIds":[],"columnWidths":{"[\"Status\"]":101.2421875,"[\"Service\"]":473.203125},"colorThresholdTarget":"background"},"honeycomb":{"shape":"square","dataMappings":{"value":"Status"},"legend":"auto","displayedFields":["Status"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"FailureRate","rangeAxis":""},{"valueAxis":"Errors","rangeAxis":""},{"valueAxis":"5xx","rangeAxis":""},{"valueAxis":"4xx","rangeAxis":""},{"valueAxis":"Requests","rangeAxis":""},{"valueAxis":"Latency_p50","rangeAxis":""},{"valueAxis":"Latency_p90","rangeAxis":""},{"valueAxis":"Latency_p99","rangeAxis":""}]},"unitsOverrides":[{"identifier":"Availability","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406692260},{"identifier":"Latency_p50","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406730982},{"identifier":"Latency_p90","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1715002954070},{"identifier":"Latency_p99","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1715003431114},{"identifier":"Requests","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1718630613563},{"identifier":"Errors","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1718630622004},{"identifier":"5xx","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1718853295595},{"identifier":"4xx","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1721450903714},{"identifier":"FailureRate","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1721451329942},{"identifier":"CPU","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1721463631721},{"identifier":"Memory","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1721463649520},{"identifier":"MemoryUsed","unitCategory":"data","baseUnit":"byte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1721463667410}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"1":{"type":"data","title":"Requests Total","query":"timeseries requests = sum(dt.service.request.count),\n           by:{dt.entity.service},\n           filter: \n           {in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))}\n| filter (in($Service, \"ALL\")) \n         OR \n         (in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))))\n| sort arraySum(requests) desc\n| fieldsAdd entityName(dt.entity.service)\n| limit 100\n\n          \n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.service.name","categoryAxisLabel":"dt.entity.service.name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["requests"],"leftAxisDimensions":["dt.entity.service","dt.entity.service.name"]},"hiddenLegendFields":["dt.entity.service","requests"],"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.service"},"legend":"auto","displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"unitsOverrides":[{"identifier":"Availability","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406692260},{"identifier":"Performance","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406706391},{"identifier":"Latency","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406730982}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"2":{"type":"data","title":"Failed Requests","query":"timeseries errors = sum(dt.service.request.failure_count),\n           by:{dt.entity.service},\n           filter: \n           {in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))}\n| filter (in($Service, \"ALL\")) \n         OR \n         (in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))))\n| sort arraySum(errors) desc\n| fieldsAdd entityName(dt.entity.service)\n| limit 100","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"barChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.service.name","categoryAxisLabel":"dt.entity.service.name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["errors"],"leftAxisDimensions":["dt.entity.service","dt.entity.service.name"]},"hiddenLegendFields":["dt.entity.service"],"legend":{"hidden":true},"colorPalette":"log-level"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.service"},"legend":"auto","displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"unitsOverrides":[]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"3":{"type":"data","title":"Latency_p90","query":"timeseries latency_p90 = percentile(dt.service.request.response_time, 90),\n           by:{dt.entity.service},\n           filter: \n           {in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))}\n| filter (in($Service, \"ALL\")) \n         OR \n         (in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))))\n| sort arrayPercentile(latency_p90, 90) desc\n| fieldsAdd entityName(dt.entity.service)\n| limit 100","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.service.name","categoryAxisLabel":"dt.entity.service.name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["latency_p90"],"leftAxisDimensions":["dt.entity.service","dt.entity.service.name"]},"hiddenLegendFields":["dt.entity.service"],"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.service"},"legend":"auto","displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"unitsOverrides":[{"identifier":"Availability","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406692260},{"identifier":"Performance","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406706391},{"identifier":"Latency","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406730982}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"9":{"type":"data","title":"Latency_p50","query":"timeseries latency_p50 = median(dt.service.request.response_time),\n           by:{dt.entity.service},\n           filter: \n           {in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))}\n| filter (in($Service, \"ALL\")) \n         OR \n         (in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))))\n| sort arrayMedian(latency_p50) desc\n| fieldsAdd entityName(dt.entity.service)\n| limit 100\n\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.service.name","categoryAxisLabel":"dt.entity.service.name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["latency_p50"],"leftAxisDimensions":["dt.entity.service","dt.entity.service.name"]},"hiddenLegendFields":["dt.entity.service"],"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.service"},"legend":"auto","displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"unitsOverrides":[{"identifier":"Availability","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406692260},{"identifier":"Performance","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406706391},{"identifier":"Latency","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406730982}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"10":{"type":"data","title":"Latency_p99","query":"timeseries latency_p99 = percentile(dt.service.request.response_time, 99), \n           by:{dt.entity.service},\n           filter: \n           {in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))}\n| filter (in($Service, \"ALL\")) \n         OR \n         (in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))))\n| sort arrayPercentile(latency_p99, 99) desc\n| fieldsAdd entityName(dt.entity.service)\n| limit 100\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.service.name","categoryAxisLabel":"dt.entity.service.name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["latency_p99"],"leftAxisDimensions":["dt.entity.service","dt.entity.service.name"]},"hiddenLegendFields":["dt.entity.service"],"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.service"},"legend":"auto","displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"unitsOverrides":[{"identifier":"Availability","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406692260},{"identifier":"Performance","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406706391},{"identifier":"Latency","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406730982}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"11":{"type":"data","title":"Memory Usage %","query":"timeseries memory=avg(dt.process.memory.usage),\n           by: {dt.entity.process_group_instance}, \n           filter: \n           {(in(dt.entity.process_group_instance, classicEntitySelector(concat(\"type(process_group_instance),mzName(\\\"\",$ManagementZone,\"\\\")\")))) \n           AND \n           (in(dt.entity.process_group_instance, classicEntitySelector(\"type(\\\"PROCESS_GROUP_INSTANCE\\\"),toRelationship.runsOnProcessGroupInstance(type(\\\"SERVICE\\\"),detectedName.exists(\\\"\\\"))\")))}\n| filter  (in($Service, \"ALL\")) \n           OR                          \n           (in(dt.entity.process_group_instance, classicEntitySelector(concat(\"type(PROCESS_GROUP_INSTANCE), toRelationship.runsOnProcessGroupInstance(type(SERVICE),entityName.equals(\\\"\",$Service,\"\\\"))\")))) \n| sort arrayAvg(memory) desc\n| fieldsAdd entityName(dt.entity.process_group_instance)\n| limit 100\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.process_group_instance.name","categoryAxisLabel":"dt.entity.process_group_instance.name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["memory"],"leftAxisDimensions":["dt.entity.process_group_instance","dt.entity.process_group_instance.name"]},"hiddenLegendFields":["dt.entity.process_group_instance"],"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"dt.entity.process_group_instance.name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.process_group_instance"},"legend":"auto","displayedFields":["dt.entity.process_group_instance"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"12":{"type":"data","title":"CPU Usage %","query":"timeseries cpu = avg(dt.process.cpu.usage),\n           by: {dt.entity.process_group_instance}, \n           filter: \n           {(in(dt.entity.process_group_instance, classicEntitySelector(concat(\"type(process_group_instance),mzName(\\\"\",$ManagementZone,\"\\\")\")))) \n           AND \n           (in(dt.entity.process_group_instance, classicEntitySelector(\"type(\\\"PROCESS_GROUP_INSTANCE\\\"),toRelationship.runsOnProcessGroupInstance(type(\\\"SERVICE\\\"),detectedName.exists(\\\"\\\"))\")))}\n| filter  (in($Service, \"ALL\")) \n           OR                          \n           (in(dt.entity.process_group_instance, classicEntitySelector(concat(\"type(PROCESS_GROUP_INSTANCE), toRelationship.runsOnProcessGroupInstance(type(SERVICE),entityName.equals(\\\"\",$Service,\"\\\"))\")))) \n| sort arrayAvg(cpu) desc\n| fieldsAdd entityName(dt.entity.process_group_instance)\n| limit 100\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.process_group_instance.name","categoryAxisLabel":"dt.entity.process_group_instance.name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["cpu"],"leftAxisDimensions":["dt.entity.process_group_instance","dt.entity.process_group_instance.name"]},"hiddenLegendFields":["dt.entity.process_group_instance"],"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"dt.entity.process_group_instance.name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.process_group_instance"},"legend":"auto","displayedFields":["dt.entity.process_group_instance"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"13":{"type":"data","title":"Memory Used","query":"timeseries memory=avg(dt.process.memory.working_set_size),\n           by: {dt.entity.process_group_instance}, \n           filter: \n           {(in(dt.entity.process_group_instance, classicEntitySelector(concat(\"type(process_group_instance),mzName(\\\"\",$ManagementZone,\"\\\")\")))) \n           AND \n           (in(dt.entity.process_group_instance, classicEntitySelector(\"type(\\\"PROCESS_GROUP_INSTANCE\\\"),toRelationship.runsOnProcessGroupInstance(type(\\\"SERVICE\\\"),detectedName.exists(\\\"\\\"))\")))}\n| filter  (in($Service, \"ALL\")) \n           OR                          \n           (in(dt.entity.process_group_instance, classicEntitySelector(concat(\"type(PROCESS_GROUP_INSTANCE), toRelationship.runsOnProcessGroupInstance(type(SERVICE),entityName.equals(\\\"\",$Service,\"\\\"))\")))) \n| sort arrayAvg(memory) desc\n| fieldsAdd entityName(dt.entity.process_group_instance)\n| limit 100","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.process_group_instance.name","categoryAxisLabel":"dt.entity.process_group_instance.name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["memory"],"leftAxisDimensions":["dt.entity.process_group_instance","dt.entity.process_group_instance.name"]},"hiddenLegendFields":["dt.entity.process_group_instance"],"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"dt.entity.process_group_instance.name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.process_group_instance"},"legend":"auto","displayedFields":["dt.entity.process_group_instance"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"18":{"type":"data","title":"Problems List","query":"fetch dt.davis.problems\n| sort timestamp desc\n| expand affected_entity_ids\n| filter matchesPhrase(affected_entity_ids, \"SERVICE-\")\n| lookup [fetch dt.entity.service\n         |filter isNotNull(managementZones)\n         |fields name=entity.name, id=id, managementZones], \n         sourceField:affected_entity_ids, \n         lookupField:id, \n         prefix:\"lookup.affected.entity.service\"\n| expand lookup.affected.entity.servicemanagementZones\n| filter isNotNull(lookup.affected.entity.servicemanagementZones)\n| filter in(lookup.affected.entity.servicemanagementZones, $ManagementZone)\n| filter in($Service , \"ALL\") OR in(lookup.affected.entity.servicename, $Service)\n\n// Summarzation Start - Group Probem Events by Problem ID\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            AffectedManagementZone = collectDistinct(lookup.affected.entity.servicemanagementZones),\n            AffectedService = collectDistinct(lookup.affected.entity.servicename),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n| fieldsAdd currentTime = toTimestamp(now())\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n// Summarzation End - Group Probem Events by Problem ID\n\n\n// Final Result Start\n| fields Status = if((status == \"OPEN\"),\"ðŸ”´ OPEN\", \n                  else:if((status == \"CLOSED\"),\"ðŸŸ¢ CLOSED\")),\n         Type = (event.name),\n         Description = concat(display_id,\" - \",severityLevel,\" - \",event.name), \n         AffectedService,\n         ManagementZone = AffectedManagementZone,\n         StartTime = startTime,\n         EndTime =  if((status == \"OPEN\"),\"In Progress\",\n                    else:if((status == \"CLOSED\"),endTime)),\n         Duration = if((status == \"CLOSED\"),problemClosedDuration,\n                         else:if((status == \"OPEN\"), toDuration(currentTime-startTime))),\n         event.id           \n| sort StartTime, direction:\"descending\"\n| sort Status, direction:\"ascending\"\n\n// Final Result End\n\n","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"Status","categoryAxisLabel":"Status","valueAxis":"Duration","valueAxisLabel":"Duration"},"fieldMapping":{"timestamp":"StartTime","leftAxisValues":["Duration"],"leftAxisDimensions":["Status"]},"hiddenLegendFields":[]},"singleValue":{"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"Status"},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[["AffectedCount"],["Severity"],["Type"],["event.id"]],"lineWrapIds":[["Affected"],["Description"],["Service"],["AffectedService"]],"columnWidths":{"[\"Status\"]":91,"[\"Problem\"]":290,"[\"Affected\"]":321,"[\"RootCause\"]":248,"[\"StartTime\"]":144,"[\"EndTime\"]":211,"[\"Duration (min)\"]":141,"[\"event.id\"]":301,"[\"Severity\"]":null,"[\"Type\"]":null,"[\"AffectedCount\"]":null}},"honeycomb":{"shape":"square","dataMappings":{"value":"Status"},"legend":"auto","displayedFields":["Status"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[]},"unitsOverrides":[]},"davis":{"davisVisualization":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"21":{"type":"data","title":"5xx Errors","query":"timeseries total = sum(dt.service.request.count),\n           by:{dt.entity.service},\n           filter:\n           http.response.status_code >= 500 and http.response.status_code <= 599 \n           and\n           in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))\n| filter in($Service, \"ALL\") or \n         in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\")))\n| sort arraySum(total) desc\n| fieldsAdd entityName(dt.entity.service)\n| limit 100","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.service.name","valueAxis":"interval","categoryAxisLabel":"dt.entity.service.name","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["total"],"leftAxisDimensions":["dt.entity.service","dt.entity.service.name"]},"hiddenLegendFields":["dt.entity.service"],"legend":{"hidden":true},"colorPalette":"log-level"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"error"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"value":"dt.entity.service"},"displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]}},"visualization":"barChart","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"22":{"type":"data","title":"4xx Errors","query":"timeseries total = sum(dt.service.request.count),\n           by:{dt.entity.service},\n           filter:\n           http.response.status_code >= 400 and http.response.status_code <= 499 \n           and\n           in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))\n| filter in($Service, \"ALL\") or \n         in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\")))\n| sort arraySum(total) desc\n| fieldsAdd entityName(dt.entity.service)\n| limit 100\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.service.name","valueAxis":"interval","categoryAxisLabel":"dt.entity.service.name","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["total"],"leftAxisDimensions":["dt.entity.service","dt.entity.service.name"]},"hiddenLegendFields":["dt.entity.service"],"legend":{"hidden":true},"colorPalette":"log-level"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"error"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"value":"dt.entity.service"},"displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]}},"visualization":"barChart","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"26":{"type":"data","title":"Requests - Status Code","query":"timeseries requests = sum(dt.service.request.count),\n           by:{dt.entity.service,http.response.status_code},\n           filter: \n           {in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))}\n| filter (in($Service, \"ALL\")) \n         OR \n         (in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))))\n| sort arraySum(requests) desc\n| fieldsAdd entityName(dt.entity.service)\n| filterOut isNull(http.response.status_code)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"barChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"dt.entity.service.name","valueAxisLabel":"http.response.status_code","categoryAxis":"dt.entity.service.name","valueAxis":"http.response.status_code"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["requests"],"leftAxisDimensions":["dt.entity.service","http.response.status_code","dt.entity.service.name"]},"hiddenLegendFields":["dt.entity.service","requests"],"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.service"},"legend":"auto","displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"http.response.status_code","rangeAxis":""}]},"unitsOverrides":[{"identifier":"Availability","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406692260},{"identifier":"Performance","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406706391},{"identifier":"Latency","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406730982}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"27":{"type":"data","title":"Requests - Key Requests","query":"timeseries requests = sum(dt.service.request.count),\n           by:{dt.entity.service,endpoint.name},\n           filter: \n           {in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))}\n| filter (in($Service, \"ALL\")) \n         OR \n         (in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))))\n| sort arraySum(requests) desc\n| fieldsAdd entityName(dt.entity.service)\n| limit 100\n| filter endpoint.name != \"NON_KEY_REQUESTS\"","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"endpoint.name","valueAxisLabel":"interval","categoryAxis":"endpoint.name","valueAxis":"interval"},"hiddenLegendFields":["requests"],"legend":{"hidden":true},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["requests"],"leftAxisDimensions":["dt.entity.service","endpoint.name","dt.entity.service.name"]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.service"},"legend":"auto","displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"unitsOverrides":[{"identifier":"Availability","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406692260},{"identifier":"Performance","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406706391},{"identifier":"Latency","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406730982}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"28":{"type":"data","title":"","query":"data record(a=\"HEALTH OVERVIEW\" )","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"a","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"â‰¥","label":"","value":"HEALTH OVERVIEW"},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"â‰¥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"CheckCircleIcon","recordField":"a","autoscale":true,"alignment":"center","colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"value":"a"},"displayedFields":["a"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"29":{"type":"data","title":"","query":"data record(a=\"PROBLEMS\" )","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"a","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"â‰¥","label":"","value":"PROBLEMS"},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"â‰¥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"DavisAiIcon","recordField":"a","autoscale":true,"alignment":"center","colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"value":"a"},"displayedFields":["a"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"30":{"type":"data","title":"","query":"data record(a=\"TRAFFIC\")","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"a","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"â‰¥","label":"","value":"TRAFFIC"},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"â‰¥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"LineChartIcon","recordField":"a","autoscale":true,"alignment":"center","colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"value":"a"},"displayedFields":["a"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"31":{"type":"data","title":"","query":"data record(a=\"LATENCY\" )","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"a","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"â‰¥","label":"","value":"LATENCY"},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"â‰¥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"StopwatchIcon","recordField":"a","autoscale":true,"alignment":"center","colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"value":"a"},"displayedFields":["a"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"32":{"type":"data","title":"","query":"data record(a=\"ERRORS\" )","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"a","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"â‰¥","label":"","value":"ERRORS"},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"â‰¥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"ErrorIcon","recordField":"a","autoscale":true,"alignment":"center","colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"value":"a"},"displayedFields":["a"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"33":{"type":"data","title":"","query":"data record(a=\"SATURATION\" )","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"a","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"â‰¥","label":"","value":"SATURATION"},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"â‰¥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"â‰¥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"MeterbarIcon","recordField":"a","autoscale":true,"alignment":"center","colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"value":"a"},"displayedFields":["a"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"36":{"type":"data","title":"Failure Rate","query":"timeseries failed = sum(dt.service.request.count), \n           by: { dt.entity.service }, \n           filter: \n           failed == true\n           and\n           in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))\n| filter in($Service, \"ALL\") or \n         in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))) \n| join [ timeseries total = sum(dt.service.request.count), \n                    by: { dt.entity.service},\n                    filter: \n                    in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))\n| filter in($Service, \"ALL\") or \n         in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))) \n], \n                    on: { dt.entity.service }, \n                    fields: {total}\n| fieldsAdd failureRate = failed[] / total[] * 100\n| sort failureRate desc\n| fields  timeframe, \n          interval,\n          dt.entity.service,\n          service = entityName(dt.entity.service),\n          failureRate\n| limit 100","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.service","categoryAxisLabel":"dt.entity.service","valueAxis":"interval","valueAxisLabel":"interval"},"hiddenLegendFields":["dt.entity.service"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["failureRate"],"leftAxisDimensions":["dt.entity.service","service"]},"legend":{"hidden":true},"colorPalette":"log-level","seriesOverrides":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"dt.entity.service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"value":"dt.entity.service"},"displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"unitsOverrides":[{"identifier":"failureRate","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1720244747132}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"37":{"type":"data","title":"Requests Per Second","query":"timeseries requests = sum(dt.service.request.count),rate:1s,\n           by:{dt.entity.service},\n           filter: \n           {in(dt.entity.service, classicEntitySelector(concat(\"type(\\\"SERVICE\\\"),mzName(\\\"\",$ManagementZone,\"\\\")\")))}\n| filter (in($Service, \"ALL\")) \n         OR \n         (in(dt.entity.service, classicEntitySelector(concat(\"type(service),entityName.equals(\\\"\",$Service,\"\\\")\"))))\n| sort arraySum(requests) desc\n| fieldsAdd entityName(dt.entity.service)\n| limit 100\n\n          \n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.service.name","categoryAxisLabel":"dt.entity.service.name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["requests"],"leftAxisDimensions":["dt.entity.service","dt.entity.service.name"]},"hiddenLegendFields":["dt.entity.service","requests"],"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Service","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"value":"dt.entity.service"},"legend":"auto","displayedFields":["dt.entity.service"],"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"unitsOverrides":[{"identifier":"Availability","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406692260},{"identifier":"Performance","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406706391},{"identifier":"Latency","unitCategory":"time","baseUnit":"microsecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1714406730982}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false}},"38":{"type":"data","title":"Services  (Current Status)","query":"fetch dt.entity.service\n| filter isNotNull(managementZones)\n| fields id, Service = entity.name, Type = serviceType, managementZones\n| expand managementZones\n| filter in(managementZones, $ManagementZone)\n| filter in($Service, \"ALL\") or in(Service, $Service)\n| join [fetch dt.davis.problems, from:now()-7h, to:now()\n| sort timestamp desc\n| filter event.status == \"ACTIVE\" and not dt.davis.is_duplicate == \"true\"\n| filter matchesPhrase(affected_entity_ids, \"SERVICE-\")\n| expand affected_entity_ids\n// | expand affected_entity_types\n// | filter affected_entity_types == \"dt.entity.service\"\n| summarize {event.status = takeLast(event.status), event.id = takeLast(event.id)}, by:{affected_entity_ids}],\n    kind: leftOuter,\n    on: {left[id] == right[affected_entity_ids] },\n    fields: { event.status,affected_entity_ids,event.id }\n| summarize {Status = collectDistinct(event.status)}, by:{Service, Type, id,event.id}\n| fields Service, \n         id,\n         event.id,\n         Problem = if(matchesPhrase(Status, \"ACTIVE\"), \"Unhealthy\", \n         else:\"Healthy\")\n| sort Problem desc","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"Application","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":{"hidden":true},"colorMode":"custom-colors","colorPalette":"categorical","dataMappings":{"value":"Problem"},"displayedFields":["Service"],"customColors":[{"id":0,"value":"Unhealthy","comparator":"=","color":{"Default":"var(--dt-colors-charts-loglevel-emergency-default, #ae132d)"}},{"id":2550753.899999991,"value":"Healthy","comparator":"=","color":"#0D9C29"}]},"histogram":{"dataMappings":[]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}},"layouts":{"0":{"x":0,"y":5,"w":24,"h":4},"1":{"x":6,"y":10,"w":6,"h":3},"2":{"x":0,"y":13,"w":6,"h":3},"3":{"x":12,"y":13,"w":6,"h":3},"9":{"x":12,"y":10,"w":6,"h":3},"10":{"x":12,"y":16,"w":6,"h":3},"11":{"x":18,"y":13,"w":6,"h":3},"12":{"x":18,"y":10,"w":6,"h":3},"13":{"x":18,"y":16,"w":6,"h":3},"18":{"x":7,"y":1,"w":17,"h":3},"21":{"x":0,"y":16,"w":6,"h":3},"22":{"x":0,"y":19,"w":6,"h":3},"26":{"x":6,"y":16,"w":6,"h":3},"27":{"x":6,"y":19,"w":6,"h":3},"28":{"x":0,"y":4,"w":24,"h":1},"29":{"x":0,"y":0,"w":24,"h":1},"30":{"x":6,"y":9,"w":6,"h":1},"31":{"x":12,"y":9,"w":6,"h":1},"32":{"x":0,"y":9,"w":6,"h":1},"33":{"x":18,"y":9,"w":6,"h":1},"36":{"x":0,"y":10,"w":6,"h":3},"37":{"x":6,"y":13,"w":6,"h":3},"38":{"x":0,"y":1,"w":7,"h":3}},"importedWithCode":false,"settings":{"defaultTimeframe":{"value":{"from":"now()-30m","to":"now()"},"enabled":true}}}