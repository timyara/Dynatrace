{"version":14,"variables":[{"key":"Cluster","type":"query","input":"fetch dt.entity.kubernetes_cluster\n| fields cluster = entity.name\n| sort cluster asc\n//| fields values = arrayRemoveNulls(array(\"ALL\", cluster))","multiple":false,"defaultValue":"ALL"},{"key":"Namespace","type":"query","input":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in(lookup.cluster_name, array($Cluster))\n// | filter in($Cluster, \"ALL\") OR \n//          in(lookup.cluster_name, $Cluster)\n| fields k8s.namespace.name\n| summarize distinctNamespaces = collectDistinct(k8s.namespace.name)\n| expand distinctNamespaces\n| sort distinctNamespaces asc\n| fields values = arrayRemoveNulls(array(\"ALL\", distinctNamespaces))","multiple":false,"defaultValue":"ALL"},{"key":"Pod","type":"query","input":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| fields k8s.pod.name\n| summarize distinctPods = collectDistinct(k8s.pod.name)\n| expand distinctPods\n| sort distinctPods asc\n| fields values = arrayRemoveNulls(array(\"ALL\", distinctPods))","multiple":false,"defaultValue":"ALL"},{"key":"Status","type":"query","input":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| fields status\n| summarize distinctStatus = collectDistinct(status)\n| expand distinctStatus\n| sort distinctStatus asc\n| fields values = arrayRemoveNulls(array(\"ALL\", distinctStatus))","multiple":false,"defaultValue":"ALL"},{"key":"LogLines","type":"csv","input":"ALL,TraceAvailable","multiple":false,"defaultValue":"ALL"}],"tiles":{"0":{"type":"data","title":"","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))       \n| makeTimeseries sparkline = count()\n| fieldsAdd  singlevalue = arraySum(sparkline)\n","davis":{"enabled":false},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"singlevalue","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"≥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["sparkline"],"leftAxisDimensions":["singlevalue"]},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxisLabel":"k8s.namespace.name","valueAxisLabel":"singlevalue"}},"singleValue":{"showLabel":true,"label":"TOTAL","prefixIcon":"LogsIcon","recordField":"singlevalue","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"}},"alignment":"center","trend":{"isVisible":false},"colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"singlevalue","rangeAxis":""}]}}},"1":{"type":"data","title":"","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| makeTimeseries total = count(),\n                 error = countIf(status == \"ERROR\")\n| fieldsAdd  singlevalue = arraySUM(error)\n","davis":{"enabled":false},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"singlevalue","title":"","isEnabled":true,"rules":[{"id":0,"color":"#0D9C29","comparator":"=","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":"#AE132D","comparator":">","label":"","value":0}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["total","error"],"leftAxisDimensions":["singlevalue"]},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxisLabel":"k8s.namespace.name","valueAxisLabel":"singlevalue"}},"singleValue":{"showLabel":true,"label":"ERRORS","prefixIcon":"ErrorIcon","recordField":"singlevalue","autoscale":true,"sparklineSettings":{"color":{"Default":"var(--dt-colors-charts-categorical-themed-fireplace-color-01-default, #ae132d)"},"variant":"area","showTicks":true,"isVisible":true},"alignment":"center","colorThresholdTarget":"background","trend":{"isVisible":false}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"singlevalue","rangeAxis":""}]}}},"2":{"type":"data","title":"","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| makeTimeseries total = count(),\n                 error = countIf(status == \"ERROR\")\n| fieldsAdd  sparkline = (toDouble(error[]) / toDouble(total[]) * 100)\n| fieldsAdd  singlevalue = arrayAvg(sparkline)\n\n","davis":{"enabled":false},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"singlevalue","title":"","isEnabled":true,"rules":[{"id":0,"color":"#0D9C29","comparator":"≥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":"#AE132D","comparator":"≥","label":"","value":2}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["total","error","sparkline"],"leftAxisDimensions":["singlevalue"]},"categoricalBarChartSettings":{"categoryAxisLabel":"k8s.namespace.name","valueAxisLabel":"singlevalue"},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"ERROR PERCENTAGE","prefixIcon":"CriticalFailedIcon","recordField":"singlevalue","autoscale":false,"sparklineSettings":{"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"variant":"area","showTicks":true},"alignment":"center","colorThresholdTarget":"background","trend":{"isVisible":false}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{}},"unitsOverrides":[{"identifier":"singlevalue","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701751669349}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"singlevalue","rangeAxis":""}]}}},"3":{"type":"data","title":"Status Summary","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| summarize  count = count(), \n                 by:{status}\n","davis":{"enabled":false},"visualization":"pieChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative","hideLabels":true,"groupingName":null},"categoryOverrides":{"ERROR":{"color":"#AE132D","added":1715612443496},"WARN":{"color":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)","added":1715612471510},"INFO":{"color":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)","added":1715612475540},"NONE":{"color":"var(--dt-colors-charts-categorical-themed-fireplace-color-06-default, #9033a3)","added":1715612477462}},"categoricalBarChartSettings":{"categoryAxis":"status","categoryAxisLabel":"status","valueAxis":"count","valueAxisLabel":"count","layout":"horizontal"},"colorPalette":"log-level","legend":{"position":"right","hidden":false}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"loglevel"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"category":"status","value":"count"},"legend":"auto"},"histogram":{"dataMappings":[{"valueAxis":"count","rangeAxis":""}]}}},"4":{"type":"data","title":"Status History","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, $Cluster)\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, $Namespace)\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, $Pod)\n| makeTimeseries chart = count(), \n                 by:{status}\n","davis":{"enabled":false},"visualization":"barChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"status","categoryAxisLabel":"status","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["chart"],"leftAxisDimensions":["status"]},"hiddenLegendFields":["chart"],"colorPalette":"log-level","legend":{"position":"bottom","hidden":false},"seriesOverrides":[{"seriesId":["WARN"],"override":{"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"}}},{"seriesId":["NONE"],"override":{"color":{"Default":"var(--dt-colors-charts-categorical-themed-fireplace-color-06-default, #9033a3)"}}},{"seriesId":["INFO"],"override":{"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"}}},{"seriesId":["ERROR"],"override":{"color":"#AE132D"}}]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"loglevel"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"category":"status","value":"status"},"legend":"auto"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]}}},"5":{"type":"data","title":"Log Lines --> Cluster = $Cluster & Namespace = $Namespace & POD = $Pod & Status = $Status & LogLines = $LogLines","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| filter in($Status, \"ALL\") OR \n         in(status,array($Status))\n| fieldsAdd trace = if(isNotNull(trace_id),\"TraceAvailable\",\n                    else: \"NoTraceAvailable\")\n| filter in($LogLines, \"ALL\") OR \n         in(trace,$LogLines)\n| sort timestamp desc\n// | fieldsAdd  status = if((status == \"NONE\"), \" 🟪 NONE\",\n//                  else:if((status == \"INFO\"), \" 🟦 INFO\",\n//                  else:if((status == \"WARN\"), \" 🟧 WARN\",\n//                  else:if((status == \"ERROR\"), \" 🟥 ERROR\"\n//                  ))))\n| fields status,\n         timestamp,\n         trace_id = if(isNotNull(trace_id), trace_id, \n                    else:\"No Trace Avaiable\"),\n         loglevel,\n         content,\n         pod = k8s.pod.name,\n         namespace = k8s.namespace.name,\n         cluster = lookup.cluster_name,\n         k8s.node = host.name\n| limit 1000\n\n\n\n","davis":{"enabled":false},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"status","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-themed-fireplace-color-06-default, #9033a3)"},"comparator":"=","label":"","value":"NONE"},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"=","label":"","value":"WARN"},{"id":2,"color":"#AE132D","comparator":"=","label":"","value":"ERROR"},{"id":3,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"=","label":"","value":"INFO"}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"loglevel","valueAxisLabel":"total"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"loglevel"},"table":{"rowDensity":"condensed","enableSparklines":true,"hiddenColumns":[["loglevel"],["k8s.node"]],"lineWrapIds":[["content"]],"columnWidths":{"[\"interval\"]":97.29167175292969,"[\"loglevel\"]":97.65625762939453,"[\"sparkline\"]":545.1458358764648,"[\"total\"]":78.22917175292969,"[\"timeframe\",\"start\"]":143.6632080078125,"[\"timeframe\",\"end\"]":144.1319580078125},"colorThresholdTarget":"background"},"honeycomb":{"shape":"square","dataMappings":{"category":"status","value":"timestamp"},"legend":"auto"},"unitsOverrides":[{"identifier":"total","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1701754014708}],"histogram":{"dataMappings":[]}}},"7":{"type":"data","title":"Total by Pod","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| summarize count = count(), \n            by:{pod = k8s.pod.name,                \n                namespace = k8s.namespace.name}\n| fields count, \n         pod,\n         namespace\n| sort count desc\n| limit 100","davis":{"enabled":false},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"count","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":""},{"id":3,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"≥","label":"","value":0}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":"pod","valueAxis":"count","categoryAxisLabel":"pod","valueAxisLabel":"count"}},"singleValue":{"showLabel":true,"label":"TOTAL","prefixIcon":"","recordField":"singlevalue","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"}},"alignment":"center","trend":{"isVisible":false},"colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["count"],["host.name"]],"columnWidths":{},"colorThresholdTarget":"background"},"honeycomb":{"shape":"square","dataMappings":{"category":"pod","value":"count"},"legend":"auto"},"histogram":{"dataMappings":[{"valueAxis":"count","rangeAxis":""}]}}},"8":{"type":"data","title":"Errors by Pod","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| summarize total = count(),\n            error = countIf(status == \"ERROR\"),\n            by:{pod = k8s.pod.name,\n                namespace =k8s.namespace.name}\n| fields count = error, \n         pod,\n         namespace\n| sort count desc\n| limit 100\n\n","davis":{"enabled":false},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"count","title":"","isEnabled":true,"rules":[{"id":0,"color":"#0D9C29","comparator":"=","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":"#AE132D","comparator":">","label":"","value":0}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":"pod","valueAxis":"count","categoryAxisLabel":"pod","valueAxisLabel":"count"}},"singleValue":{"showLabel":true,"label":"TOTAL","prefixIcon":"","recordField":"singlevalue","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"}},"alignment":"center","trend":{"isVisible":false},"colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["count"],["host.name"]],"columnWidths":{},"colorThresholdTarget":"background"},"honeycomb":{"shape":"square","dataMappings":{"category":"pod","value":"count"},"legend":"auto"},"histogram":{"dataMappings":[{"valueAxis":"count","rangeAxis":""}]}}},"9":{"type":"data","title":"ErrorRate by Pod","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| summarize {total = count(),\n            error = countIf(status == \"ERROR\")}, \n            by:{pod = k8s.pod.name,\n                namespace = k8s.namespace.name}\n| fieldsAdd  errorRate = (toDouble(error) / toDouble(total) * 100)\n| fields errorRate,\n         pod,\n         namespace\n| sort errorRate desc\n| limit 100","davis":{"enabled":false},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"errorRate","title":"","isEnabled":true,"rules":[{"id":0,"color":"#0D9C29","comparator":"≥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":"#AE132D","comparator":"≥","label":"","value":2}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"pod","valueAxisLabel":"errorRate","categoryAxis":"pod","valueAxis":"errorRate"},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"ERROR PERCENTAGE","prefixIcon":"","recordField":"singlevalue","autoscale":false,"sparklineSettings":{"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"variant":"area","showTicks":true},"alignment":"center","colorThresholdTarget":"background","trend":{"isVisible":false}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{},"colorThresholdTarget":"background"},"honeycomb":{"shape":"square","dataMappings":{"category":"pod","value":"errorRate"},"legend":"auto"},"unitsOverrides":[{"identifier":"errorRate","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701751669349}],"histogram":{"dataMappings":[{"valueAxis":"errorRate","rangeAxis":""}]}}},"11":{"type":"data","title":"Errors by Pod","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| makeTimeseries error = countIf(status == \"ERROR\"),\n                 by:{k8s.pod = k8s.pod.name,\n                     k8s.namespace = k8s.namespace.name}\n\n\n\n","davis":{"enabled":false},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":1,"field":"count","title":"","isEnabled":false,"rules":[{"id":0,"color":"#0D9C29","comparator":"=","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":"#AE132D","comparator":">","label":"","value":0}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":"k8s.pod","valueAxis":"interval","categoryAxisLabel":"k8s.pod","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["error"],"leftAxisDimensions":["k8s.pod","k8s.namespace"]},"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"TOTAL","prefixIcon":"","recordField":"singlevalue","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"}},"alignment":"center","trend":{"isVisible":false},"colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["count"],["host.name"]],"columnWidths":{},"colorThresholdTarget":"value"},"honeycomb":{"shape":"square","dataMappings":{"category":"k8s.pod","value":"k8s.namespace"},"legend":"auto"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]}}},"12":{"type":"data","title":"Total by Pod","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| makeTimeseries count = count(), \n                 by:{k8s.pod = k8s.pod.name,\n                 k8s.namespace = k8s.namespace.name}\n","davis":{"enabled":false},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":"k8s.pod","valueAxis":"interval","categoryAxisLabel":"k8s.pod","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["count"],"leftAxisDimensions":["k8s.pod","k8s.namespace"]},"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"TOTAL","prefixIcon":"","recordField":"singlevalue","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"}},"alignment":"center","trend":{"isVisible":false},"colorThresholdTarget":"background"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["count"],["host.name"]],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"category":"k8s.pod","value":"k8s.namespace"},"legend":"auto"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]}}},"13":{"type":"data","title":"ErrorRate by Pod","query":"fetch logs\n| filter isNotNull(dt.entity.kubernetes_cluster)\n| filter isNotNull(k8s.namespace.name)\n| lookup [ fetch dt.entity.kubernetes_cluster\n         | fields name=entity.name, id=id], \n           sourceField:dt.entity.kubernetes_cluster, lookupField:id ,prefix:\"lookup.cluster_\"\n| filter in($Cluster, \"ALL\") OR \n         in(lookup.cluster_name, array($Cluster))\n| filter in($Namespace, \"ALL\") OR \n         in(k8s.namespace.name, array($Namespace))\n| filter in($Pod, \"ALL\") OR \n         in(k8s.pod.name, array($Pod))\n| makeTimeseries {total = count(),\n                  error = countIf(status == \"ERROR\")}, \n                  by:{k8s.pod = k8s.pod.name,\n                      k8s.namespace = k8s.namespace.name}\n| fieldsAdd  errorRate = (toDouble(error[]) / toDouble(total[]) * 100)\n| fields timeframe, \n         interval, \n         k8s.pod,\n         k8s.namespace,\n         errorRate","davis":{"enabled":false},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"k8s.pod","valueAxisLabel":"interval","categoryAxis":"k8s.pod","valueAxis":"interval"},"hiddenLegendFields":[],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["errorRate"],"leftAxisDimensions":["k8s.pod","k8s.namespace"]},"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"ERROR PERCENTAGE","prefixIcon":"","recordField":"singlevalue","autoscale":false,"sparklineSettings":{"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"variant":"area","showTicks":true},"alignment":"center","colorThresholdTarget":"background","trend":{"isVisible":false}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"columnWidths":{}},"honeycomb":{"shape":"square","dataMappings":{"category":"k8s.pod","value":"k8s.namespace"},"legend":"auto"},"unitsOverrides":[{"identifier":"errorRate","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1715634112827}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]}}},"14":{"type":"markdown","title":"","content":"#"},"15":{"type":"data","title":"","query":"data record(Status = \"ERROR\", LogLevels = \"SEVERE, ERROR, CRITICAL, ALERT, FATAL, EMERGENCY\"),\n     record(Status = \"WARN\", LogLevels = \"WARN\"),\n     record(Status = \"INFO\", LogLevels = \"INFO, TRACE, DEBUG, NOTICE\"),\n     record(Status = \"NONE\", LogLevels = \"NONE\")","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"Status","title":"","isEnabled":true,"rules":[{"id":0,"color":"#AE132D","comparator":"=","label":"","value":"ERROR"},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"=","label":"","value":"WARN"},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"},"comparator":"=","label":"","value":"INFO"},{"id":3,"color":{"Default":"var(--dt-colors-charts-categorical-themed-fireplace-color-06-default, #9033a3)"},"comparator":"=","label":"","value":"NONE"}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"a","valueAxisLabel":"b"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"a","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"default","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["LogLevels"]],"columnWidths":{},"colorThresholdTarget":"background"},"honeycomb":{"shape":"hexagon","legend":"auto","dataMappings":{"category":"Status","value":"LogLevels"}},"histogram":{"dataMappings":[]}}},"16":{"type":"markdown","title":"","content":"### 💡 [Log Status Mapping](https://docs.dynatrace.com/docs/observe-and-explore/logs/lma-log-ingestion-via-api/lma-log-data-transformation)"}},"layouts":{"0":{"x":6,"y":0,"w":6,"h":3},"1":{"x":12,"y":0,"w":6,"h":3},"2":{"x":18,"y":0,"w":6,"h":3},"3":{"x":0,"y":0,"w":6,"h":5},"4":{"x":0,"y":5,"w":6,"h":5},"5":{"x":0,"y":10,"w":24,"h":10},"7":{"x":6,"y":6,"w":6,"h":4},"8":{"x":12,"y":6,"w":6,"h":4},"9":{"x":18,"y":6,"w":6,"h":4},"11":{"x":12,"y":3,"w":6,"h":3},"12":{"x":6,"y":3,"w":6,"h":3},"13":{"x":18,"y":3,"w":6,"h":3},"14":{"x":0,"y":20,"w":24,"h":1},"15":{"x":0,"y":22,"w":7,"h":4},"16":{"x":0,"y":21,"w":7,"h":1}},"importedWithCode":false}